<div class="container mx-4 my-4">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold">Training Programs</h2>
      <button class="bg-blue-500 text-white px-4 py-2 rounded" (click)="openCreateForm()">
        Add New Program
      </button>
    </div>

    <div *ngIf="loading" class="text-center py-4">
      Loading programs...
    </div>

    <div *ngIf="error" class="bg-red-100 text-red-700 p-3 rounded mb-4">
      {{ error }}
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border border-gray-300">
        <thead>
          <tr>
            <th class="px-4 py-2 border">Module</th>
            <th class="px-4 py-2 border">Trainer</th>
            <th class="px-4 py-2 border">Training Mode</th>
            <th class="px-4 py-2 border">Start Date</th>
            <th class="px-4 py-2 border">End Date</th>
            <th class="px-4 py-2 border">Status</th>
            <th class="px-4 py-2 border">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let program of programs">
            <td class="px-4 py-2 border">{{ program.module }}</td>
            <td class="px-4 py-2 border">
              {{ getTrainerName(program.trainer) }}
            </td>
            <td class="px-4 py-2 border">{{ program.trainingMode }}</td>
            <td class="px-4 py-2 border">{{ program.startDate | date }}</td>
            <td class="px-4 py-2 border">{{ program.endDate | date }}</td>
            <td class="px-4 py-2 border">
              <span [class]="getStatusClass(program.status)">
                {{ program.status }}
              </span>
            </td>
            <td class="px-4 py-2 border">
              <button class="text-blue-500 mr-2" (click)="editProgram(program)">Edit</button>
              <button class="text-red-500" (click)="deleteProgram(program._id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Create/Edit Modal -->
    <div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg w-full max-w-2xl">
        <h3 class="text-xl font-bold mb-4">{{ editingProgram ? 'Edit' : 'Create' }} Program</h3>
        <form [formGroup]="programForm" (ngSubmit)="onSubmit()">
          <!-- Form fields -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block mb-2">Module</label>
              <input type="text" formControlName="module" class="w-full border p-2 rounded">
            </div>
            
            <div>
              <label class="block mb-2">Trainer</label>
              <select formControlName="trainer" class="w-full border p-2 rounded">
                <option value="">Select Trainer</option>
                <option *ngFor="let trainer of trainers" [value]="trainer._id">
                  {{ trainer.Trainername }}
                </option>
              </select>
            </div>

            <div>
              <label class="block mb-2">Training Mode</label>
              <select formControlName="trainingMode" class="w-full border p-2 rounded">
                <option value="Online">Online</option>
                <option value="Offline">Offline</option>
              </select>
            </div>

            <div>
              <label class="block mb-2">Status</label>
              <select formControlName="status" class="w-full border p-2 rounded">
                <option value="Scheduled">Scheduled</option>
                <option value="Ongoing">Ongoing</option>
                <option value="Completed">Completed</option>
              </select>
            </div>

            <div>
              <label class="block mb-2">Start Date</label>
              <input type="date" formControlName="startDate" class="w-full border p-2 rounded">
            </div>

            <div>
              <label class="block mb-2">End Date</label>
              <input type="date" formControlName="endDate" class="w-full border p-2 rounded">
            </div>

            <div>
              <label class="block mb-2">Day Hours</label>
              <input type="number" formControlName="dayHour" class="w-full border p-2 rounded">
            </div>

            <div>
              <label class="block mb-2">Time</label>
              <input type="text" formControlName="time" class="w-full border p-2 rounded"
                     placeholder="10:00 AM - 12:00 PM">
            </div>
          </div>

          <div class="mt-4">
            <label class="block mb-2">Topics</label>
            <div formArrayName="topics">
              <div *ngFor="let topic of topicsFormArray.controls; let i=index" class="flex gap-2 mb-2">
                <input [formControlName]="i" class="flex-1 border p-2 rounded">
                <button type="button" class="text-red-500" (click)="removeTopic(i)">Remove</button>
              </div>
            </div>
            <button type="button" class="text-blue-500" (click)="addTopic()">Add Topic</button>
          </div>

          <div class="mt-4">
            <label class="block mb-2">Reference Notes</label>
            <textarea formControlName="referenceNotes" class="w-full border p-2 rounded" rows="3"></textarea>
          </div>

          <div class="mt-6 flex justify-end gap-4">
            <button type="button" class="px-4 py-2 border rounded" (click)="closeModal()">Cancel</button>
            <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
`